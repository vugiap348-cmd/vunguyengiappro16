<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đề Kiểm Tra Lịch Sử Số 15</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .timer {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 24px;
            font-weight: bold;
        }

        .timer.warning {
            background: rgba(255,0,0,0.3);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .content {
            padding: 30px;
        }

        .section-title {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 30px 0 20px 0;
            font-size: 20px;
            font-weight: bold;
        }

        .question {
            background: #f8f9fa;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            border-left: 5px solid #667eea;
        }

        .question-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            font-size: 16px;
        }

        .options {
            margin-left: 20px;
        }

        .option {
            margin: 10px 0;
            display: flex;
            align-items: flex-start;
        }

        .option input[type="radio"],
        .option input[type="checkbox"] {
            margin-right: 10px;
            margin-top: 4px;
            cursor: pointer;
            width: 18px;
            height: 18px;
        }

        .option label {
            cursor: pointer;
            flex: 1;
        }

        .document-box {
            background: #fff8dc;
            border: 2px solid #daa520;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            font-style: italic;
            line-height: 1.8;
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            display: block;
            margin: 30px auto;
            transition: transform 0.2s;
        }

        .submit-btn:hover {
            transform: scale(1.05);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .result-box {
            background: #e8f5e9;
            border: 3px solid #4caf50;
            padding: 25px;
            margin: 20px 0;
            border-radius: 10px;
            display: none;
        }

        .result-box.show {
            display: block;
        }

        .score {
            font-size: 32px;
            font-weight: bold;
            color: #2e7d32;
            text-align: center;
            margin: 20px 0;
        }

        .correct {
            background: #c8e6c9 !important;
            border-left-color: #4caf50 !important;
        }

        .incorrect {
            background: #ffcdd2 !important;
            border-left-color: #f44336 !important;
        }

        .correct-answer {
            color: #2e7d32;
            font-weight: bold;
            margin-top: 10px;
        }

        .user-answer {
            color: #c62828;
            font-weight: bold;
            margin-top: 5px;
        }

        .instruction {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }

        .part2-item {
            margin-bottom: 15px;
            padding-left: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: left;
        }

        th {
            background: #f0f0f0;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ĐỀ KIỂM TRA SỐ 15 - MÔN LỊCH SỬ</h1>
            <div class="timer" id="timer">Thời gian: 45:00</div>
        </div>

        <div class="content">
            <div class="instruction">
                <strong>Hướng dẫn:</strong><br>
                - Phần I: Mỗi câu hỏi chỉ chọn một phương án (24 câu × 0.25 điểm = 6 điểm)<br>
                - Phần II: Mỗi câu có 4 ý a, b, c, d - chọn Đúng hoặc Sai (4 câu, thang điểm: 1 ý đúng = 0.1đ, 2 ý = 0.25đ, 3 ý = 0.5đ, 4 ý = 1.0đ)<br>
                - Thời gian làm bài: 45 phút<br>
                - Nhấn "Nộp bài" để xem kết quả và đáp án
            </div>

            <div class="section-title">PHẦN I: Thí sinh trả lời câu hỏi từ 1 đến 24. Mỗi câu hỏi thí sinh chỉ chọn một phương án.</div>
            
            <div id="part1-questions"></div>

            <div class="section-title">PHẦN II: Thí sinh trả lời câu hỏi từ 1 đến 4. Trong mỗi ý a), b), c), d) ở mỗi câu, thí sinh chọn đúng hoặc sai.</div>
            
            <div id="part2-questions"></div>

            <button class="submit-btn" id="submitBtn">Nộp bài</button>

            <div class="result-box" id="resultBox">
                <h2 style="text-align: center; color: #2e7d32;">KẾT QUẢ BÀI KIỂM TRA</h2>
                <div class="score" id="scoreDisplay"></div>
                <div id="detailScore"></div>
            </div>
        </div>
    </div>

    <script>
        const part1Questions = [
            {
                id: 1,
                question: "Nguyên nhân khách quan dẫn đến chế độ xã hội chủ nghĩa ở Liên Xô và các nước Đông Âu tan rã là",
                options: [
                    "đường lối chủ quan, duy ý chí, tập trung quan liêu bao cấp.",
                    "không bắt kịp sự phát triển của khoa học – kĩ thuật tiên tiến.",
                    "khi tiến hành cải tổ phạm phải nhiều sai lầm trên nhiều mặt.",
                    "sự chống phá của các thế lực thù địch ở trong và ngoài nước."
                ],
                correct: 3
            },
            {
                id: 2,
                question: "Trong giai đoạn 1959 – 1978 Trung Quốc rơi vào khủng hoảng trầm trọng về",
                options: [
                    "quân sự.",
                    "kinh tế.",
                    "văn hóa.",
                    "ngoại giao."
                ],
                correct: 1
            },
            {
                id: 3,
                question: "Nội dung nào sau đây phản ánh không đúng về đặc điểm của cuộc khởi nghĩa Lam Sơn (1418 - 1427)?",
                options: [
                    "Mang tính chất chính nghĩa, giải phóng dân tộc và tính nhân dân sâu sắc.",
                    "Dùng sức mạnh quân sự to lớn, áp đảo để đè bẹp ý chí xâm lược kẻ thù.",
                    "Từ khởi nghĩa địa phương phát triển thành chiến tranh giải phóng dân tộc.",
                    "Thể hiện tư tưởng nhân nghĩa, kết hợp quân sự và ngoại giao khéo léo."
                ],
                correct: 1
            },
            {
                id: 4,
                question: "Triều đại nào sau đây đã đánh bại quân xâm lược nhà Tống trên dòng sông Như Nguyệt vào thế kỷ XI?",
                options: [
                    "Triều Hồ.",
                    "Triều Trần.",
                    "Triều Lý.",
                    "Triều Lê."
                ],
                correct: 2
            },
            {
                id: 5,
                question: "Tổ chức nào sau đây được Mỹ thành lập trong thời gian diễn ra Chiến tranh lạnh (1947 - 1989)?",
                options: [
                    "NATO.",
                    "IMF.",
                    "WTO",
                    "SEV."
                ],
                correct: 0
            },
            {
                id: 6,
                question: "Quyết định nào dưới đây của Hội nghị Ianta (2 – 1945) tác động trực tiếp đến tình hình Việt Nam sau cách mạng tháng Tám?",
                options: [
                    "Liên Xô không được đưa quân đội vào Đông Dương.",
                    "Anh sẽ mở đường cho Pháp chiếm lại Đông Dương.",
                    "Đông Nam Á thuộc phạm vi ảnh hưởng của phương Tây.",
                    "Quân đội Trung Hoa Dân quốc giải giáp phát xít Nhật."
                ],
                correct: 2
            },
            {
                id: 7,
                question: "Quốc gia nào sau đây là một trong những thành viên của Hiệp hội các quốc gia Đông Nam Á (ASEAN)?",
                options: [
                    "Hàn Quốc.",
                    "Bru-nây.",
                    "Ai Cập.",
                    "Ấn Độ."
                ],
                correct: 1
            },
            {
                id: 8,
                question: "Một trong những nội dung hợp tác của Cộng đồng ASEAN là",
                options: [
                    "dân chủ.",
                    "quân sự.",
                    "đối ngoại.",
                    "kinh tế."
                ],
                correct: 3
            },
            {
                id: 9,
                question: "Việt Nam gia nhập tổ chức ASEAN năm 1995 có ý nghĩa vô cùng quan trọng đối với các nước trong khu vực vì",
                options: [
                    "đã mở ra triển vọng cho sự liên kết trong toàn khu vực Đông Nam Á.",
                    "chứng tỏ sự hợp tác giữa các thành viên ASEAN ngày càng hiệu quả.",
                    "đã mở ra quá trình liên kết của ASEAN với các nước ngoài khu vực.",
                    "đánh dấu ASEAN đã trở thành liên minh kinh tế, chính trị hùng mạnh."
                ],
                correct: 0
            },
            {
                id: 10,
                question: "Hình thức đấu tranh nào sau đây không được tiến hành trong Tổng khởi nghĩa tháng Tám (1945)?",
                options: [
                    "Vũ trang.",
                    "Nghị trường.",
                    "Chính trị.",
                    "Binh vận."
                ],
                correct: 1
            },
            {
                id: 11,
                question: "Một trong những địa phương giành chính quyền sớm nhất trong Tổng khởi nghĩa tháng Tám năm 1945 ở Việt Nam là",
                options: [
                    "Sài Gòn.",
                    "Hà Tiên.",
                    "Hà Nội.",
                    "Hải Dương."
                ],
                correct: 3
            },
            {
                id: 12,
                question: "Một trong những điểm giống nhau của chiến dịch Điện Biên Phủ (1954) và chiến dịch Hồ Chí Minh (1975) là",
                options: [
                    "huy động tối đa lực lượng.",
                    "phương châm chiến dịch.",
                    "phương thức để chiến đấu.",
                    "sự phối hợp của không quân."
                ],
                correct: 0
            },
            {
                id: 13,
                question: "Một trong những điểm giống về nguyên nhân thắng lợi của cuộc chiến tranh bảo vệ biên giới phía Bắc (1979) và cuộc kháng chiến chống Mỹ (1954-1975) là",
                options: [
                    "đoàn kết của ba nước Đông Dương.",
                    "phát huy cao độ truyền thống dân tộc.",
                    "phong trào phản chiến của dân Mỹ.",
                    "sự viện trợ to lớn của Liên Hợp Quốc."
                ],
                correct: 1
            },
            {
                id: 14,
                question: "Đại hội toàn quốc lần thứ VI của Đảng Cộng sản Việt Nam (12 - 1986) chủ trương đổi mới về chính trị là xây dựng nhà nước",
                options: [
                    "pháp quyền xã hội chủ nghĩa.",
                    "pháp quyền dân chủ tư sản.",
                    "pháp quyền dân chủ vô sản.",
                    "pháp chế xã hội chủ nghĩa."
                ],
                correct: 0
            },
            {
                id: 15,
                question: "\"Tập trung ưu tiên phát triển nông nghiệp gắn với xây dựng nông thôn mới\" (Nghị quyết 06-NQ/TW, ngày 5/11/2016) là một trong những chủ trương, chính sách lớn nhằm",
                options: [
                    "phát huy lợi thế nông nghiệp ở địa phương.",
                    "thực hiện tiến trình hội nhập kinh tế quốc tế.",
                    "xoá bỏ nền nông nghiệp manh mún, lạc hậu.",
                    "phát huy sức mạnh đoàn kết toàn dân tộc."
                ],
                correct: 1
            },
            {
                id: 16,
                question: "Một trong những hoạt động đối ngoại của Việt Nam đối với Trung Quốc trong giai đoạn 1975-1985 là",
                options: [
                    "đàm phán giải quyết vấn đề xung đột biên giới.",
                    "hội nghị thượng đỉnh bàn về vấn đề của ASEAN.",
                    "đàm phán về việc khai thác chung nguồn khí đốt.",
                    "thương lượng để Trung Quốc tang cường viện trợ."
                ],
                correct: 0
            },
            {
                id: 17,
                question: "Nội dung nào sau đây phản ánh đúng mục đích của các hoạt động đối ngoại do Chính phủ Việt Nam tiến hành trong giai đoạn 1976 – 1985?",
                options: [
                    "Đánh bại âm mưu chia cắt đất nước.",
                    "Bình thường quan hệ với Trung Quốc.",
                    "Chống lại sự bao vây cấm vận của Mỹ.",
                    "Chuẩn bị gia nhập vào tổ chức ASEAN."
                ],
                correct: 2
            },
            {
                id: 18,
                question: "Nội dung định hướng chung cho hoạt động đối ngoại là\"Hợp tác bình đẳng cùng có lợi với tất cả các nước, không phân biệt chế độ chính trị…\". Được Đại hội lần thứ mấy của Đảng đề ra?",
                options: [
                    "IV.",
                    "VI.",
                    "VII.",
                    "XI"
                ],
                correct: 2
            },
            {
                id: 19,
                question: "Hội nghị Ban chấp hành Trung ương Đảng Cộng sản Đông Dương lần VIII do Nguyễn Ái Quốc triệu tập và chủ trì (1941), có vai trò nào sau đây?",
                options: [
                    "Mở đầu quá trình chuyển hướng chiến lược cho cách mạng.",
                    "Đưa vấn đề dân tộc về phạm vi từng nước ở Đông Dương.",
                    "Xác định kẻ thù chính trước mắt là thực dân Pháp và tay sai.",
                    "Quyết định phát động tổng khởi nghĩa trên phạm vi cả nước."
                ],
                correct: 1
            },
            {
                id: 20,
                question: "Chủ nghĩa Mác – Lê-nin và yếu tố nào sau đây đóng vai trò nền tảng tư tưởng, kim chỉ nam cho hành động của Đảng Cộng sản Việt Nam?",
                options: [
                    "Tư tưởng Hồ Chí Minh.",
                    "Phong cách Hồ Chí Minh.",
                    "Quan điểm Hồ Chí Minh.",
                    "Đường lối Hồ Chí Minh."
                ],
                correct: 0
            },
            {
                id: 21,
                question: "Trong quá trình chuẩn bị cho cách mạng tháng Tám (1941-1945), các hoạt động của Nguyễn Ái Quốc - Hồ Chí Minh đã đem lại kết quả nào sau đây?",
                options: [
                    "Thành lập được tổ chức lãnh đạo mọi thắng lợi của cách mạng.",
                    "Trực tiếp lãnh đạo thắng lợi phong trào Xô viết ở Nghệ - Tĩnh.",
                    "Tạo điều kiện cho thắng lợi của cuộc kháng chiến chống Pháp.",
                    "Chuẩn bị những điều kiện cơ bản cho sự bùng nổ của cách mạng."
                ],
                correct: 3
            },
            {
                id: 22,
                question: "Nhận định nào sau đây là đúng về nhân tố quyết định cho những thắng lợi của công cuộc Đổi mới ở Việt Nam (từ năm 1986)?",
                options: [
                    "Nắm bắt được thời cơ, vượt qua thách thức đưa đất nước tiến lên.",
                    "Coi trọng giáo dục và khoa học – kĩ thuật là quốc sách hàng đầu.",
                    "Đảng Cộng sản Việt Nam lãnh đạo phát huy nội lực và ngoại lực.",
                    "Chính sách thu hút các nguồn vốn từ trong nước và của Việt Kiều."
                ],
                correct: 2
            },
            {
                id: 23,
                question: "Một trong những bài học kinh nghiệm quý báu rút ra từ chiến thắng Điện Biên Phủ (1954) có thể vận dụng trong sự nghiệp xây dựng và bảo vệ Tổ quốc Việt Nam hiện nay là",
                options: [
                    "tổ chức và phát huy sức mạnh của khối đại đoàn kết dân tộc.",
                    "giành thắng lợi quân sự mới giành được thắng lợi về ngoại giao.",
                    "tập hợp đoàn kết toàn dân trên cơ sở liên minh công – nông.",
                    "xây dựng lực lượng vũ trang nhân dân làm nhiệm vụ hàng đầu."
                ],
                correct: 0
            },
            {
                id: 24,
                question: "Nhận định nào sau đây về vị trí, vai trò của Liên Hợp Quốc trên trường quốc tế là không đúng?",
                options: [
                    "Diễn đàn quốc tế lớn nhất, vừa hợp tác vừa đấu tranh nhằm duy trì hòa bình an ninh thế giới.",
                    "Có vai trò quan trọng trong việc thúc đẩy quan hệ hợp tác hữu nghị giữa các quốc gia, dân tộc.",
                    "Liên hợp quốc là tổ chức liên kết chính trị - kinh tế - quân sự lớn nhất hành tinh hiện nay.",
                    "Có vai trò quan trọng trong việc giúp đỡ các quốc gia dân tộc về y tế, văn hóa, giáo dục."
                ],
                correct: 2
            }
        ];

        const part2Questions = [
            {
                id: 1,
                question: "Cho những thông tin trong bảng sau đây:",
                document: '<table><tr><th>I. Thời gian</th><th>II. Hoạt động</th></tr><tr><td>Năm 1964</td><td>Dựng lên sự kiện Vịnh Bắc Bộ.</td></tr><tr><td>Tử năm 1964 đến năm 1968.</td><td>Tiến hành cuộc chiến tranh phá hoại miền Bắc lần thứ nhất.</td></tr><tr><td>Năm 1972</td><td>Tiến hành cuộc chiến tranh phá hoại miền Bắc lần thứ hai.</td></tr><tr><td>Cuối năm 1972</td><td>Dùng máy bay B52 ném bom hủy diệt Hà Nội, Hải Phòng.</td></tr><tr><td>Đầu năm 1973</td><td>Giữ lại 2 vạn quân ở miền Nam, tiếp tục Việt Nam hóa chiến tranh.</td></tr></table>',
                subQuestions: [
                    {
                        id: 'a',
                        text: "Tư liệu đề cập đến âm mưu và hành động của Mỹ đối với cách mạng Việt Nam trong giai đoạn 1964 đến 1973.",
                        correct: true
                    },
                    {
                        id: 'b',
                        text: "Mỹ tiến hành các cuộc chiến tranh phá hoại miền Bắc nhằm buộc Việt Nam ký hiệp định theo hướng có lợi cho Mỹ.",
                        correct: false
                    },
                    {
                        id: 'c',
                        text: "Việc Mỹ giữ lại cố vấn quân sự sau Hiệp định Paris là biểu hiện của việc tiếp tục thực hiện Việt Nam hóa chiến tranh.",
                        correct: true
                    },
                    {
                        id: 'd',
                        text: "Các hành động quân sự trên của Mỹ dù thất bại nhưng đã thể hiện sự chủ động của Mỹ trong chiến tranh xâm lược.",
                        correct: false
                    }
                ]
            },
            {
                id: 2,
                question: "Cho đoạn tư liệu sau đây:",
                document: '"Sau khi kêu gọi toàn quốc kháng chiến, ngày 21-12-1946, Chủ tịch Hồ Chí Minh gửi thư cho nhân dân Việt Nam, nhân dân Pháp và nhân dân các nước Đồng minh để cho thế giới biết rõ mục tiêu và quyết tâm đấu tranh vì độc lập, tự do của nhân dân Việt Nam. Người khẳng định: "Cuộc kháng chiến rất lâu dài và gian khổ. Dù phải hy sinh bao nhiêu và thời gian kháng chiến đến bao giờ, chúng ta cũng nhất định chiến đấu đến cùng, đến bao giờ nước Việt Nam được hoàn toàn độc lập và thống nhất. Chúng ta có 20 triệu chống lại 10 vạn thực dân. Cuộc thắng lợi của ta rất được bảo đảm".<br><em>Hồ Chí Minh: Toàn tập, tập 4, Nxb Chính trị Quốc gia – Sự thật, Hà Nội, 2011, tr. 480-481.</em>',
                subQuestions: [
                    {
                        id: 'a',
                        text: "Tư liệu đề cập đến quan điểm và quyết tâm kháng chiến của nhân dân Việt Nam chống thực dân Pháp xâm lược lần thứ hai.",
                        correct: true
                    },
                    {
                        id: 'b',
                        text: "Tư liệu cho thấy ngay khi kháng chiến toàn quốc bùng nổ, nhân dân Pháp và các nước Đồng minh đã ủng hộ Việt Nam.",
                        correct: false
                    },
                    {
                        id: 'c',
                        text: "Cuộc kháng chiến chống Pháp của nhân dân Việt Nam là một cuộc chiến tranh chính nghĩa, tiến bộ, vì độc lập, tự do, hòa bình.",
                        correct: true
                    },
                    {
                        id: 'd',
                        text: "Tư liệu khẳng định mục tiêu của kháng chiến chống Pháp là độc lập và thống nhất vì đất nước đang bị chia cắt thành hai miền.",
                        correct: false
                    }
                ]
            },
            {
                id: 3,
                question: "Cho đoạn tư liệu sau đây:",
                document: '"Hội đồng bảo an có thẩm quyền quyết định những biện pháp nào phải được áp dụng mà không sử dụng vũ lực để thực hiện các nghị quyết của Hội đồng, và có thể yêu cầu các thành viên của Liên hợp quốc áp dụng những biện pháp ấy. Các biện pháp này có thể là cắt đứt toàn bộ hay từng phần quan hệ kinh tế, đường sắt, đường biển, hàng không, bưu chính, điện tín, vô tuyến điện và các phương tiện thông tin khác, kể cả việc cắt đứt quan hệ ngoại giao".<br><em>(Trích: Điều 41, Hiến chương Liên hợp quốc, ngày 24-10-1945)</em>',
                subQuestions: [
                    {
                        id: 'a',
                        text: "Tư liệu đề cập đến thẩm quyền của Hội đồng bảo an Liên hợp quốc nhằm thực hiện mục tiêu của tổ chức.",
                        correct: true
                    },
                    {
                        id: 'b',
                        text: "Hội đồng bảo an gồm đại diện tất cả các nước thành viên, có vai trò quan trọng nhất trong Liên hợp quốc.",
                        correct: false
                    },
                    {
                        id: 'c',
                        text: "Mọi quyết định của Hội đồng bảo an đều là đại diện cho tiếng nói của tất cả các thành viên của Liên hợp quốc.",
                        correct: false
                    },
                    {
                        id: 'd',
                        text: "Hội đồng bảo an có vai trò quan trọng trong việc thực hiện mục tiêu quan trọng nhất của Liên hợp quốc.",
                        correct: true
                    }
                ]
            },
            {
                id: 4,
                question: "Cho đoạn tư liệu sau đây:",
                document: '"Sự phát triển sôi động của các thành phần kinh tế đã đem lại hiệu quả trông thấy. Nền nông nghiệp đạt được những thành tựu cơ bản, trước hết là sản xuất lúa, gạo. Từ khi thực hiện đổi mới trong nông nghiệp, hằng năm có nhiều vụ lúa được mùa. Về sản lượng lương thực quy ra thóc, năm: 1987: 17.562 nghìn tấn, 1988: 19.538 nghìn tấn, 1989: 21.515 nghìn tấn và 1990: 21.488 nghìn tấn\'. Trong 5 năm 1986-1990, tổng sản lượng lương thực quy thóc tăng 13,5 triệu tấn so với 5 năm 1981-1985."<br><em>Nguyễn Ngọc Mão (Chủ biên), Lịch sử Việt Nam, tập 15, NXB. Khoa học xã hội 2017, tr. 50</em>',
                subQuestions: [
                    {
                        id: 'a',
                        text: "Tư liệu đề cập đến một trong những thành tựu về kinh tế của công cuộc đổi mới ở Việt Nam từ năm 1986.",
                        correct: true
                    },
                    {
                        id: 'b',
                        text: "Trong giai đoạn đầu đổi mới, Việt Nam tập trung thực hiện những mục tiêu của Ba chương trình kinh tế lớn.",
                        correct: true
                    },
                    {
                        id: 'c',
                        text: "Những thành tựu trong sản xuất lúa gạo đã khẳng định công cuộc đổi mới ở Việt Nam là đúng đắn, phù hợp.",
                        correct: false
                    },
                    {
                        id: 'd',
                        text: "Sản xuất nông nghiệp được coi là lĩnh vực trọng tâm trong công cuộc đổi mới đất nước ở Việt Nam hiện nay.",
                        correct: false
                    }
                ]
            }
        ];

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        const shuffledPart1 = part1Questions.map(q => {
            const shuffledOptions = shuffleArray(q.options.map((opt, idx) => ({text: opt, isCorrect: idx === q.correct})));
            return {
                ...q,
                options: shuffledOptions.map(o => o.text),
                correct: shuffledOptions.findIndex(o => o.isCorrect)
            };
        });

        const shuffledPart2 = part2Questions.map(q => ({
            ...q,
            subQuestions: shuffleArray(q.subQuestions)
        }));

        function renderPart1() {
            const container = document.getElementById('part1-questions');
            shuffledPart1.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.id = 'p1q' + q.id;
                
                let html = '<div class="question-title">Câu ' + q.id + '. ' + q.question + '</div>';
                html += '<div class="options">';
                
                q.options.forEach((option, optIndex) => {
                    const letter = String.fromCharCode(65 + optIndex);
                    html += '<div class="option"><input type="radio" name="q' + q.id + '" id="q' + q.id + '_' + optIndex + '" value="' + optIndex + '"><label for="q' + q.id + '_' + optIndex + '">' + letter + '. ' + option + '</label></div>';
                });
                
                html += '</div>';
                questionDiv.innerHTML = html;
                container.appendChild(questionDiv);
            });
        }

        function renderPart2() {
            const container = document.getElementById('part2-questions');
            shuffledPart2.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.id = 'p2q' + q.id;
                
                let html = '<div class="question-title">Câu ' + q.id + ': ' + q.question + '</div>';
                html += '<div class="document-box">' + q.document + '</div>';
                
                q.subQuestions.forEach(sub => {
                    html += '<div class="part2-item"><strong>' + sub.id + ')</strong> ' + sub.text + '<br><div style="margin-top: 8px; margin-left: 20px;"><label style="margin-right: 20px;"><input type="radio" name="q' + q.id + '_' + sub.id + '" value="true"> Đúng</label><label><input type="radio" name="q' + q.id + '_' + sub.id + '" value="false"> Sai</label></div></div>';
                });
                
                questionDiv.innerHTML = html;
                container.appendChild(questionDiv);
            });
        }

        let timeLeft = 45 * 60;
        const timerElement = document.getElementById('timer');
        
        function updateTimer() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerElement.textContent = 'Thời gian: ' + minutes.toString().padStart(2, '0') + ':' + seconds.toString().padStart(2, '0');
            
            if (timeLeft <= 5 * 60) {
                timerElement.classList.add('warning');
            }
            
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                submitExam();
            }
            
            timeLeft--;
        }
        
        const timerInterval = setInterval(updateTimer, 1000);

        function gradeExam() {
            let part1Score = 0;
            let part2Score = 0;
            const results = {part1: [], part2: []};
            
            shuffledPart1.forEach(q => {
                const selected = document.querySelector('input[name="q' + q.id + '"]:checked');
                const userAnswer = selected ? parseInt(selected.value) : -1;
                const isCorrect = userAnswer === q.correct;
                
                if (isCorrect) part1Score += 0.25;
                
                results.part1.push({
                    id: q.id,
                    correct: isCorrect,
                    userAnswer: userAnswer,
                    correctAnswer: q.correct
                });
            });
            
            shuffledPart2.forEach(q => {
                let correctCount = 0;
                const subResults = [];
                
                q.subQuestions.forEach(sub => {
                    const selected = document.querySelector('input[name="q' + q.id + '_' + sub.id + '"]:checked');
                    const userAnswer = selected ? selected.value === 'true' : null;
                    const isCorrect = userAnswer === sub.correct;
                    
                    if (isCorrect) correctCount++;
                    
                    subResults.push({
                        id: sub.id,
                        correct: isCorrect,
                        userAnswer: userAnswer,
                        correctAnswer: sub.correct
                    });
                });
                
                if (correctCount === 1) part2Score += 0.1;
                else if (correctCount === 2) part2Score += 0.25;
                else if (correctCount === 3) part2Score += 0.5;
                else if (correctCount === 4) part2Score += 1.0;
                
                results.part2.push({
                    id: q.id,
                    correctCount: correctCount,
                    subResults: subResults
                });
            });
            
            return {
                part1Score: Math.round(part1Score * 100) / 100,
                part2Score: Math.round(part2Score * 100) / 100,
                totalScore: Math.round((part1Score + part2Score) * 100) / 100,
                results: results
            };
        }

        function displayResults(gradeResults) {
            const resultBox = document.getElementById('resultBox');
            const scoreDisplay = document.getElementById('scoreDisplay');
            const detailScore = document.getElementById('detailScore');
            
            scoreDisplay.innerHTML = 'Tổng điểm: ' + gradeResults.totalScore + '/10';
            detailScore.innerHTML = '<p style="text-align: center; font-size: 18px;">Phần I: ' + gradeResults.part1Score + '/6 điểm<br>Phần II: ' + gradeResults.part2Score + '/4 điểm</p>';
            
            resultBox.classList.add('show');
            
            gradeResults.results.part1.forEach(r => {
                const questionDiv = document.getElementById('p1q' + r.id);
                questionDiv.classList.add(r.correct ? 'correct' : 'incorrect');
                
                if (!r.correct) {
                    const correctLetter = String.fromCharCode(65 + r.correctAnswer);
                    const userLetter = r.userAnswer >= 0 ? String.fromCharCode(65 + r.userAnswer) : 'Không chọn';
                    
                    const answerInfo = document.createElement('div');
                    answerInfo.innerHTML = '<div class="user-answer">Bạn chọn: ' + userLetter + '</div><div class="correct-answer">Đáp án đúng: ' + correctLetter + '</div>';
                    questionDiv.appendChild(answerInfo);
                }
            });
            
            gradeResults.results.part2.forEach(r => {
                const questionDiv = document.getElementById('p2q' + r.id);
                questionDiv.classList.add(r.correctCount === 4 ? 'correct' : 'incorrect');
                
                const answerInfo = document.createElement('div');
                answerInfo.innerHTML = '<div style="margin-top: 15px; padding: 10px; background: #fff3cd; border-radius: 5px;"><strong>Kết quả: ' + r.correctCount + '/4 ý đúng</strong><br>';
                
                r.subResults.forEach(sub => {
                    const icon = sub.correct ? '✓' : '✗';
                    const color = sub.correct ? '#2e7d32' : '#c62828';
                    const userText = sub.userAnswer === null ? 'Không chọn' : (sub.userAnswer ? 'Đúng' : 'Sai');
                    const correctText = sub.correctAnswer ? 'Đúng' : 'Sai';
                    
                    answerInfo.innerHTML += '<div style="margin: 5px 0; color: ' + color + ';">' + icon + ' <strong>' + sub.id + ')</strong> Bạn chọn: <strong>' + userText + '</strong> - Đáp án: <strong>' + correctText + '</strong></div>';
                });
                
                answerInfo.innerHTML += '</div>';
                questionDiv.appendChild(answerInfo);
            });
        }

        function submitExam() {
            clearInterval(timerInterval);
            document.getElementById('submitBtn').disabled = true;
            
            document.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach(input => {
                input.disabled = true;
            });
            
            const gradeResults = gradeExam();
            displayResults(gradeResults);
            
            document.getElementById('resultBox').scrollIntoView({behavior: 'smooth'});
        }

        document.getElementById('submitBtn').addEventListener('click', submitExam);

        renderPart1();
        renderPart2();
        updateTimer();
    </script>
</body>
    </html>
